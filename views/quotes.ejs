<%- include('partials/header', { title: 'Request a Quote' }) %>

  <main class="container">
    <h1>Request a Quote</h1>

    <!-- Package Selection Cards -->
    <section class="package-selection">
      <h2>Select Your Package</h2>
      <div class="package-cards grid">
        
        <article class="card package-card" data-package="Basic">
          <h3>Basic</h3>
          <p class="package-price">$50 per drop + $50 install fee</p>
          <ul class="package-features">
            <li>Install lines A to B</li>
            <li>Standard termination (RJ45/11 or punch down)</li>
            <li>Testing and verification</li>
            <li>Low-voltage box, plate, keystone included</li>
          </ul>
          <p class="package-deposit">$20 deposit on quotes over $100</p>
          <button type="button" class="package-select-btn" data-package="Basic">Select Basic</button>
        </article>

        <article class="card package-card" data-package="Premium">
          <h3>Premium</h3>
          <p class="package-price">$50/hr (Est. 3-5 hours)</p>
          <ul class="package-features">
            <li>Everything in Basic</li>
            <li>All labor included</li>
            <li>Mount & install routers, switches, APs, cameras, panel hardware</li>
            <li>Cable management and setup</li>
          </ul>
          <p class="package-note">Highly recommended for complex setups</p>
          <button type="button" class="package-select-btn" data-package="Premium">Select Premium</button>
        </article>

      </div>

      <!-- Survey Add-on -->
      <div class="survey-option">
        <article class="card survey-card">
          <h3>Site Survey Add-on</h3>
          <p class="survey-price">$100 (â‰ˆ2 hrs) due up front</p>
          <ul class="survey-features">
            <li>On-site walk-through and discussion of goals & budget</li>
            <li>Advise on placements and specs</li>
            <li>Provide recommended parts list upon request</li>
            <li>Estimate provided at the end</li>
            <li>Applied as credit to install costs</li>
          </ul>
          <p class="survey-note">Replaces Basic package deposit requirement</p>
          <label for="includeSurvey" class="survey-checkbox">
            <input type="checkbox" id="includeSurvey" name="includeSurvey" />
            Include Site Survey
          </label>
        </article>
      </div>
    </section>

    <!-- Speed Tier & Equipment Selection -->
    <section id="equipmentSection" style="display: none;">
      <h2>Equipment Selection</h2>
      <p>Select your target speed tier to see compatible equipment options:</p>
      
      <!-- Speed Tier Selection -->
      <div class="speed-tier-selection">
        <h3>Target Speed Tier</h3>
        <div class="speed-tier-options">
          <label class="speed-tier-option">
            <input type="radio" name="speedTier" value="1 Gig" id="speedTier1Gig">
            <span class="speed-tier-label">1 Gig</span>
          </label>
          <label class="speed-tier-option">
            <input type="radio" name="speedTier" value="5 Gig" id="speedTier5Gig">
            <span class="speed-tier-label">5 Gig</span>
          </label>
          <label class="speed-tier-option">
            <input type="radio" name="speedTier" value="10 Gig" id="speedTier10Gig">
            <span class="speed-tier-label">10 Gig</span>
          </label>
        </div>
      </div>

      <!-- Equipment Options (dynamically populated) -->
      <div id="equipmentOptions" style="display: none;">
        <h3>Available Equipment</h3>
        <div id="equipmentCards" class="equipment-grid">
          <!-- Equipment cards will be populated by JavaScript -->
        </div>
      </div>

      <!-- Shopping Cart -->
      <div id="equipmentCart" style="display: none;">
        <h3>Selected Equipment</h3>
        <div id="cartItems">
          <!-- Cart items will be populated by JavaScript -->
        </div>
        <div class="cart-total">
          <strong>Equipment Total: $<span id="equipmentTotal">0</span></strong>
        </div>
      </div>
    </section>

    <!-- Additional Services -->
    <section>
      <h2>Additional Services</h2>
      <ul>
        <li>Device mounting: $10/item</li>
        <li>Network setup: $20</li>
        <li>Media panel install (panel not included): $50</li>
      </ul>
    </section>

    <!-- Quote Request Form -->
    <form id="quoteForm">
      <fieldset>
        <legend>Contact Information</legend>
        <label for="name">Name</label>
        <input id="name" name="name" required />

        <label for="email">Email</label>
        <input id="email" name="email" type="email" required />
      </fieldset>

      <fieldset>
        <legend>Quote Details</legend>

        <!-- Hidden inputs for selected package -->
        <input type="hidden" id="selectedPackage" name="package" required />
        
        <div id="selectedPackageDisplay" style="display: none; margin-bottom: 1rem;">
          <strong>Selected Package: <span id="packageDisplayName"></span></strong>
          <button type="button" id="changePackageBtn" style="margin-left: 1rem; font-size: 0.9rem;">Change Package</button>
        </div>

        <!-- Cable Runs -->
        <fieldset id="runsSection">
          <legend>Cable Runs</legend>

          <label for="coaxRuns">
            Coax runs:
            <input
              type="number"
              id="coaxRuns"
              name="coaxRuns"
              min="0"
              value="0"
            />
          </label>

          <label for="cat6Runs">
            Cat6 runs:
            <input
              type="number"
              id="cat6Runs"
              name="cat6Runs"
              min="0"
              value="0"
            />
          </label>
        </fieldset>

        <!-- Additional Services with quantities -->
        <fieldset id="servicesSection">
          <legend>Additional Services</legend>

          <label for="deviceMountQty">
            Device mounting ($10/item):
            <input
              type="number"
              id="deviceMountQty"
              name="deviceMountQty"
              min="0"
              value="0"
            />
          </label>

          <label for="networkSetupQty">
            Network setup ($20):
            <input
              type="number"
              id="networkSetupQty"
              name="networkSetupQty"
              min="0"
              value="0"
            />
          </label>

          <label for="mediaPanelQty">
            Media panel install ($50):
            <input
              type="number"
              id="mediaPanelQty"
              name="mediaPanelQty"
              min="0"
              value="0"
            />
          </label>
        </fieldset>

        <!-- Dynamic Pricing Display -->
        <fieldset id="pricingSection" style="display: none;">
          <legend>Estimated Pricing</legend>
          
          <div id="basicPricing" style="display: none;">
            <p><strong>Total Cost: $<span id="totalCost">0</span></strong></p>
            <p id="equipmentCostBasic" style="display: none;">Equipment: $<span id="equipmentCostBasicAmount">0</span></p>
            <p id="depositInfo">Deposit Required: $<span id="depositAmount">0</span></p>
            <p id="surveyFeeInfo" style="display: none;">Site Survey Fee: $<span id="surveyFee">0</span></p>
          </div>
          
          <div id="premiumPricing" style="display: none;">
            <p><strong>Estimated Hours: <span id="estimatedHours">0</span> hrs @ $<span id="laborRate">50</span>/hr</strong></p>
            <p><strong>Estimated Total: $<span id="estimatedTotal">0</span></strong></p>
            <p id="equipmentCostPremium" style="display: none;">Equipment: $<span id="equipmentCostPremiumAmount">0</span></p>
            <p id="premiumSurveyFeeInfo" style="display: none;">Site Survey Fee: $<span id="premiumSurveyFee">0</span></p>
          </div>
          
          <p><em>Note: Final pricing may vary based on site conditions and specific requirements.</em></p>
        </fieldset>
      </fieldset>

      <button type="submit" id="submitBtn" disabled>Request Quote</button>
    </form>
    <p id="quoteStatus"></p>
  </main>

  <script src="/scripts/quotes.js"></script>
  <%- include('partials/footer') %>